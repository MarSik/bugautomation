import org.marsik.bugautomation.facts.BugzillaBug;
import org.marsik.bugautomation.facts.TrelloBoard;
import org.marsik.bugautomation.facts.TrelloCard;
import org.marsik.bugautomation.facts.Bug;
import org.marsik.bugautomation.services.BugzillaActions;
import org.marsik.bugautomation.services.TrelloActions;

global TrelloActions trello;
global BugzillaActions bugzilla;

rule "newBug"
  when
    $bz: BugzillaBug($bug : bug, $user : assignedTo)
    $board: TrelloBoard(name == "Test BZ sync")
    not(exists TrelloCard(bug == $bug, board == $board))
  then
    trello.createCard($board, "TODO", $bz, $user);
end

/*
TODO rules with flag matching like:

BugzillaBug( $flags : flags )
    BugzillaBugFlag( flag == "blocker+" ) from $flags
*/
